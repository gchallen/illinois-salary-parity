<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Illinois CS Faculty Salary Parity Analysis</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #f8f9fa;
            color: #333;
        }
        h1 {
            text-align: center;
            color: #1a1a1a;
            margin-bottom: 5px;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        #chart {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            height: 520px;
        }
        .summary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 30px;
        }
        .summary-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        .summary-card h3 {
            margin: 0 0 10px 0;
            color: #555;
            font-size: 0.9em;
            text-transform: uppercase;
        }
        .summary-card .gap {
            font-size: 2em;
            font-weight: bold;
        }
        .summary-card.parity .gap { color: #22c55e; }
        .summary-card.moderate .gap { color: #f59e0b; }
        .summary-card.significant .gap { color: #ef4444; }
        .summary-card .detail {
            color: #888;
            font-size: 0.9em;
            margin-top: 5px;
        }
        .methodology {
            background: white;
            border-radius: 8px;
            padding: 25px 30px;
            margin-top: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
            line-height: 1.6;
        }
        .methodology h2 {
            margin: 0 0 15px 0;
            font-size: 1.1em;
            color: #333;
        }
        .methodology h3 {
            margin: 20px 0 10px 0;
            font-size: 1em;
            color: #555;
        }
        .methodology p, .methodology ul {
            margin: 10px 0;
            color: #555;
        }
        .methodology ul {
            padding-left: 20px;
        }
        .methodology li {
            margin: 5px 0;
        }
        .methodology a {
            color: #3b82f6;
        }
        .footer {
            margin-top: 30px;
            text-align: center;
            color: #888;
            font-size: 0.85em;
        }
        .footer a {
            color: #666;
        }
    </style>
</head>
<body>
    <h1>Salary Parity Gap Widens with Seniority</h1>
    <p class="subtitle">Illinois Siebel School of Computing & Data Science: Teaching vs Research Faculty</p>
    <p class="note" style="text-align: center; color: #888; font-size: 0.85em; margin-top: -20px; margin-bottom: 20px;">Note: Tenure-track faculty are labeled as research faculty</p>

    <div id="chart"></div>

    <div class="summary" id="summary-cards">
        <!-- Will be populated by JavaScript with median-based calculations -->
    </div>

    <div class="methodology">
        <h2>Methodology</h2>

        <h3>Data Source</h3>
        <p>Salary data was extracted from the <a href="https://www.bot.uillinois.edu/resources/gray_book">University of Illinois Gray Book 2025-26</a>,
        which contains proposed salary information for all university employees as approved by the Board of Trustees.</p>

        <h3>Faculty Selection</h3>
        <p>The analysis includes only faculty who meet all of the following criteria:</p>
        <ul>
            <li>Listed on the <a href="https://siebelschool.illinois.edu/about/people/all-faculty/department-faculty">Siebel School public faculty directory</a></li>
            <li>Full-time appointment (1.0 FTE)</li>
            <li>Primary appointment in the Department of Computer Science</li>
            <li>Not a joint appointment with another department</li>
        </ul>
        <p>This conservative approach ensures we compare faculty with similar appointment structures. Clinical faculty, research faculty, and senior lecturers were excluded from the analysis.</p>

        <h3>Classification</h3>
        <ul>
            <li><strong>Teaching Faculty:</strong> Faculty with titles containing "Teaching" or "TCH" (Teaching Assistant Professor, Teaching Associate Professor, Teaching Professor)</li>
            <li><strong>Research Faculty:</strong> Tenure-track faculty (Assistant Professor, Associate Professor, Professor)</li>
        </ul>

        <h3>Gap Calculation</h3>
        <p>The salary gap is calculated as: <code>(Teaching Median - Research Median) / Research Median Ã— 100%</code></p>
        <p>Negative values indicate teaching faculty earn less than research faculty at the same rank. Medians are used rather than means to reduce the influence of outliers.</p>

        <h3>Source Code</h3>
        <p>The data processing scripts and this visualization are available at <a href="https://github.com/gchallen/illinois-salary-parity">github.com/gchallen/illinois-salary-parity</a>.</p>
    </div>

    <div class="footer">
        <p>Source: <a href="https://www.bot.uillinois.edu/resources/gray_book">University of Illinois Gray Book 2025-26</a></p>
    </div>

    <script>
        // Anonymized faculty salary data (filtered to publicly-listed faculty only)
        const data = [{"track": "Tenure-Track", "rank": "Full", "salary": 233376}, {"track": "Tenure-Track", "rank": "Full", "salary": 244800}, {"track": "Tenure-Track", "rank": "Full", "salary": 244800}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 143208}, {"track": "Teaching", "rank": "Associate", "salary": 160050}, {"track": "Tenure-Track", "rank": "Full", "salary": 315762}, {"track": "Teaching", "rank": "Full", "salary": 180000}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 140000}, {"track": "Tenure-Track", "rank": "Full", "salary": 212160}, {"track": "Tenure-Track", "rank": "Full", "salary": 212160}, {"track": "Teaching", "rank": "Associate", "salary": 160138.55}, {"track": "Tenure-Track", "rank": "Full", "salary": 196248}, {"track": "Teaching", "rank": "Full", "salary": 175424}, {"track": "Tenure-Track", "rank": "Full", "salary": 225366}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 145330}, {"track": "Tenure-Track", "rank": "Full", "salary": 176310}, {"track": "Tenure-Track", "rank": "Full", "salary": 222768}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 144269}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 143208}, {"track": "Teaching", "rank": "Associate", "salary": 160050}, {"track": "Tenure-Track", "rank": "Associate", "salary": 174500}, {"track": "Tenure-Track", "rank": "Full", "salary": 217464}, {"track": "Teaching", "rank": "Assistant", "salary": 146390.4}, {"track": "Teaching", "rank": "Full", "salary": 176000}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 145330}, {"track": "Tenure-Track", "rank": "Full", "salary": 265838}, {"track": "Teaching", "rank": "Assistant", "salary": 140000}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 143208}, {"track": "Teaching", "rank": "Associate", "salary": 145329.6}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 145330}, {"track": "Tenure-Track", "rank": "Full", "salary": 206856}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 140000}, {"track": "Tenure-Track", "rank": "Full", "salary": 301451}, {"track": "Tenure-Track", "rank": "Full", "salary": 243984}, {"track": "Tenure-Track", "rank": "Full", "salary": 212160}, {"track": "Tenure-Track", "rank": "Full", "salary": 244800}, {"track": "Tenure-Track", "rank": "Full", "salary": 265838}, {"track": "Tenure-Track", "rank": "Full", "salary": 217464}, {"track": "Tenure-Track", "rank": "Full", "salary": 209845}, {"track": "Tenure-Track", "rank": "Full", "salary": 208845}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 143208}, {"track": "Teaching", "rank": "Full", "salary": 175424}, {"track": "Tenure-Track", "rank": "Full", "salary": 207346}, {"track": "Tenure-Track", "rank": "Full", "salary": 207346}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 145330}, {"track": "Tenure-Track", "rank": "Full", "salary": 221357}, {"track": "Tenure-Track", "rank": "Full", "salary": 222233}, {"track": "Tenure-Track", "rank": "Associate", "salary": 175000}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 141200}, {"track": "Tenure-Track", "rank": "Associate", "salary": 175000}, {"track": "Tenure-Track", "rank": "Associate", "salary": 173400}, {"track": "Tenure-Track", "rank": "Associate", "salary": 176000}, {"track": "Tenure-Track", "rank": "Full", "salary": 206856}, {"track": "Tenure-Track", "rank": "Associate", "salary": 175500}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 140000}, {"track": "Tenure-Track", "rank": "Full", "salary": 206856}, {"track": "Tenure-Track", "rank": "Associate", "salary": 175500}, {"track": "Tenure-Track", "rank": "Associate", "salary": 153600}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 140000}, {"track": "Teaching", "rank": "Assistant", "salary": 145329.6}, {"track": "Tenure-Track", "rank": "Full", "salary": 212670}, {"track": "Tenure-Track", "rank": "Associate", "salary": 175000}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 144269}, {"track": "Tenure-Track", "rank": "Full", "salary": 230634}, {"track": "Tenure-Track", "rank": "Associate", "salary": 175250}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 140000}, {"track": "Tenure-Track", "rank": "Full", "salary": 289224}, {"track": "Teaching", "rank": "Assistant", "salary": 145329.6}, {"track": "Tenure-Track", "rank": "Full", "salary": 212160}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 145330}, {"track": "Tenure-Track", "rank": "Full", "salary": 201552}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 141200}, {"track": "Tenure-Track", "rank": "Full", "salary": 229577}, {"track": "Tenure-Track", "rank": "Associate", "salary": 146390}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 144269}, {"track": "Teaching", "rank": "Assistant", "salary": 140100}, {"track": "Tenure-Track", "rank": "Full", "salary": 206856}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 142800}, {"track": "Teaching", "rank": "Assistant", "salary": 140100}, {"track": "Tenure-Track", "rank": "Full", "salary": 265200}, {"track": "Teaching", "rank": "Associate", "salary": 161241.6}, {"track": "Teaching", "rank": "Associate", "salary": 161241.6}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 144269}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 141200}, {"track": "Teaching", "rank": "Assistant", "salary": 145329.6}, {"track": "Tenure-Track", "rank": "Associate", "salary": 175250.01}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 141200}, {"track": "Tenure-Track", "rank": "Full", "salary": 196248}, {"track": "Teaching", "rank": "Assistant", "salary": 143208}, {"track": "Tenure-Track", "rank": "Full", "salary": 190000}, {"track": "Tenure-Track", "rank": "Full", "salary": 250000}, {"track": "Teaching", "rank": "Associate", "salary": 164424}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 145330}, {"track": "Tenure-Track", "rank": "Full", "salary": 214200}, {"track": "Tenure-Track", "rank": "Associate", "salary": 175000}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 144269}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 145330}, {"track": "Tenure-Track", "rank": "Full", "salary": 265838}, {"track": "Teaching", "rank": "Full", "salary": 181560}, {"track": "Tenure-Track", "rank": "Associate", "salary": 147451}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 140000}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 145860}, {"track": "Tenure-Track", "rank": "Associate", "salary": 175250}, {"track": "Tenure-Track", "rank": "Full", "salary": 223575}, {"track": "Tenure-Track", "rank": "Associate", "salary": 175500}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 147900}, {"track": "Tenure-Track", "rank": "Full", "salary": 244800}, {"track": "Tenure-Track", "rank": "Assistant", "salary": 144269}, {"track": "Tenure-Track", "rank": "Full", "salary": 196248}];

        // Group data by track and rank
        const groups = {
            'Teaching Assistant': { x: [], y: [], color: '#3b82f6' },
            'Tenure-Track Assistant': { x: [], y: [], color: '#f97316' },
            'Teaching Associate': { x: [], y: [], color: '#3b82f6' },
            'Tenure-Track Associate': { x: [], y: [], color: '#f97316' },
            'Teaching Full': { x: [], y: [], color: '#3b82f6' },
            'Tenure-Track Full': { x: [], y: [], color: '#f97316' }
        };

        // X positions for each group
        const xPositions = {
            'Teaching Assistant': 0.8,
            'Tenure-Track Assistant': 1.2,
            'Teaching Associate': 2.8,
            'Tenure-Track Associate': 3.2,
            'Teaching Full': 4.8,
            'Tenure-Track Full': 5.2
        };

        // Group and sort data by salary ascending
        const groupedData = {};
        data.forEach(d => {
            const key = `${d.track} ${d.rank}`;
            if (!groupedData[key]) groupedData[key] = [];
            groupedData[key].push(d.salary);
        });

        // Sort each group and assign x positions based on rank
        Object.keys(groupedData).forEach(key => {
            groupedData[key].sort((a, b) => a - b);
            const count = groupedData[key].length;
            const baseX = xPositions[key];
            const spread = 0.3;

            groupedData[key].forEach((salary, i) => {
                // Spread points evenly within the group's x range
                const offset = count > 1 ? (i / (count - 1) - 0.5) * spread : 0;
                groups[key].x.push(baseX + offset);
                groups[key].y.push(salary);
            });
        });

        // Legend labels (shorter for better fit)
        const legendLabels = {
            'Teaching Assistant': 'Teaching Asst',
            'Teaching Associate': 'Teaching Assoc',
            'Teaching Full': 'Teaching Full',
            'Tenure-Track Assistant': 'Research Asst',
            'Tenure-Track Associate': 'Research Assoc',
            'Tenure-Track Full': 'Research Full'
        };

        // Create traces
        const traces = [];

        // Teaching traces (blue) - first row
        ['Teaching Assistant', 'Teaching Associate', 'Teaching Full'].forEach(key => {
            traces.push({
                x: groups[key].x,
                y: groups[key].y,
                mode: 'markers',
                type: 'scatter',
                name: legendLabels[key],
                legendgroup: 'teaching',
                marker: {
                    color: '#3b82f6',
                    size: 10,
                    opacity: 0.7,
                    line: { color: '#1e40af', width: 1 }
                },
                hovertemplate: `${key}<br>$%{y:,.0f}<extra></extra>`
            });
        });

        // Research traces (orange) - second row
        ['Tenure-Track Assistant', 'Tenure-Track Associate', 'Tenure-Track Full'].forEach(key => {
            const displayName = key.replace('Tenure-Track', 'Research');
            traces.push({
                x: groups[key].x,
                y: groups[key].y,
                mode: 'markers',
                type: 'scatter',
                name: legendLabels[key],
                legendgroup: 'research',
                marker: {
                    color: '#f97316',
                    size: 10,
                    opacity: 0.7,
                    line: { color: '#c2410c', width: 1 }
                },
                hovertemplate: `${displayName}<br>$%{y:,.0f}<extra></extra>`
            });
        });

        // Calculate medians for each group
        const medians = {};
        Object.keys(groupedData).forEach(key => {
            const sorted = groupedData[key];
            const mid = Math.floor(sorted.length / 2);
            medians[key] = sorted.length % 2 !== 0
                ? sorted[mid]
                : (sorted[mid - 1] + sorted[mid]) / 2;
        });

        // Calculate gap percentages (negative = teaching paid less than research)
        const assistantGap = ((medians['Teaching Assistant'] - medians['Tenure-Track Assistant']) / medians['Tenure-Track Assistant'] * 100);
        const associateGap = ((medians['Teaching Associate'] - medians['Tenure-Track Associate']) / medians['Tenure-Track Associate'] * 100);
        const fullGap = ((medians['Teaching Full'] - medians['Tenure-Track Full']) / medians['Tenure-Track Full'] * 100);

        const layout = {
            showlegend: true,
            legend: {
                orientation: 'h',
                y: -0.15,
                x: 0.5,
                xanchor: 'center',
                traceorder: 'grouped',
                itemwidth: 40
            },
            xaxis: {
                tickvals: [1, 3, 5],
                ticktext: ['Assistant Professor', 'Associate Professor', 'Full Professor'],
                range: [0, 6],
                title: ''
            },
            yaxis: {
                title: 'Annual Salary',
                tickvals: [150000, 200000, 250000, 300000],
                ticktext: ['$150K', '$200K', '$250K', '$300K'],
                gridcolor: '#e5e7eb',
                range: [115000, 330000]
            },
            margin: { t: 20, b: 100, l: 80, r: 20 },
            plot_bgcolor: 'white',
            paper_bgcolor: 'white',
            hovermode: 'closest',
            annotations: [
                // Gap labels (calculated from medians)
                {
                    x: 1, y: 152000,
                    text: Math.abs(assistantGap) < 1 ? '<b>Parity</b>' : `<b>${assistantGap.toFixed(0)}%</b>`,
                    showarrow: false,
                    font: { size: 12, color: '#22c55e' }
                },
                {
                    x: 3, y: 185000,
                    text: `<b>${associateGap.toFixed(0)}%</b>`,
                    showarrow: false,
                    font: { size: 12, color: '#f59e0b' }
                },
                {
                    x: 5, y: 240000,
                    text: `<b>${fullGap.toFixed(0)}%</b>`,
                    showarrow: false,
                    font: { size: 12, color: '#ef4444' }
                },
                // Median labels - Teaching (blue) - below dots
                {
                    x: xPositions['Teaching Assistant'],
                    y: 125000,
                    text: `Teaching<br>Median<br>$${Math.round(medians['Teaching Assistant']/1000)}K`,
                    showarrow: false,
                    font: { size: 9, color: '#3b82f6' },
                    xanchor: 'center'
                },
                {
                    x: xPositions['Teaching Associate'],
                    y: 125000,
                    text: `Teaching<br>Median<br>$${Math.round(medians['Teaching Associate']/1000)}K`,
                    showarrow: false,
                    font: { size: 9, color: '#3b82f6' },
                    xanchor: 'center'
                },
                {
                    x: xPositions['Teaching Full'],
                    y: 125000,
                    text: `Teaching<br>Median<br>$${Math.round(medians['Teaching Full']/1000)}K`,
                    showarrow: false,
                    font: { size: 9, color: '#3b82f6' },
                    xanchor: 'center'
                },
                // Median labels - Research (orange) - below dots
                {
                    x: xPositions['Tenure-Track Assistant'],
                    y: 125000,
                    text: `Research<br>Median<br>$${Math.round(medians['Tenure-Track Assistant']/1000)}K`,
                    showarrow: false,
                    font: { size: 9, color: '#f97316' },
                    xanchor: 'center'
                },
                {
                    x: xPositions['Tenure-Track Associate'],
                    y: 125000,
                    text: `Research<br>Median<br>$${Math.round(medians['Tenure-Track Associate']/1000)}K`,
                    showarrow: false,
                    font: { size: 9, color: '#f97316' },
                    xanchor: 'center'
                },
                {
                    x: xPositions['Tenure-Track Full'],
                    y: 125000,
                    text: `Research<br>Median<br>$${Math.round(medians['Tenure-Track Full']/1000)}K`,
                    showarrow: false,
                    font: { size: 9, color: '#f97316' },
                    xanchor: 'center'
                }
            ]
        };

        const config = {
            responsive: true,
            displayModeBar: true,
            modeBarButtonsToRemove: ['lasso2d', 'select2d']
        };

        Plotly.newPlot('chart', traces, layout, config);

        // Calculate and display median-based gaps
        const gaps = [
            {
                rank: 'Assistant Professor',
                teaching: medians['Teaching Assistant'],
                tenure: medians['Tenure-Track Assistant']
            },
            {
                rank: 'Associate Professor',
                teaching: medians['Teaching Associate'],
                tenure: medians['Tenure-Track Associate']
            },
            {
                rank: 'Full Professor',
                teaching: medians['Teaching Full'],
                tenure: medians['Tenure-Track Full']
            }
        ];

        const summaryContainer = document.getElementById('summary-cards');
        gaps.forEach((g, i) => {
            const gapPercent = ((g.teaching - g.tenure) / g.tenure * 100).toFixed(1);
            const gapClass = i === 0 ? 'parity' : (i === 1 ? 'moderate' : 'significant');
            const detail = i === 0 ? 'Near-perfect parity' : (i === 1 ? 'Moderate gap emerges' : 'Significant disparity');

            summaryContainer.innerHTML += `
                <div class="summary-card ${gapClass}">
                    <h3>${g.rank}</h3>
                    <div class="gap">${gapPercent}%</div>
                    <div class="detail">${detail}</div>
                </div>
            `;
        });
    </script>
</body>
</html>
